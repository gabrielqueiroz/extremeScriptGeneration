<!DOCTYPE html>
<html lang="pt-br">
<head>
	<!-- 		configure snmp sysName \"X\"
				configure snmp sysContact \"X\"
				
				configure ports X display-string \"X\"
				configure ports X description-string \"X\"

				enable sharing X grouping X algorithm address-based L2 lacp

				configure vlan default delete ports X 
				create vlan \"X\"
				configure vlan X tag X

				configure vlan X add ports X X  
				configure vlan Default ipaddress X X

				configure iproute add default X -->

	<title>TDec Extreme Script</title>
	<link rel="stylesheet" href="css/bootstrap.min.css"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="js/jquery-1.11.3.js"></script>	
	<script>
		var vlanCount = 1;
		var switchPort = 1;
		var portCount = 1;
		var output = "";

		function addPort(portNumber){
			if(portNumber == 0){
				var div = document.createElement('div');

			    div.innerHTML = '<div class="form-group">\
									<div class="col-sm-2 col-md-2">\
										<input class="form-control" id="customport'+portCount+'" placeholder="Port">\
									</div>\
									<div class="col-sm-5 col-md-5">\
										<input class="form-control" id="customdispstring'+portCount+'" placeholder="Display String">\
									</div>\
									<div class="col-sm-5 col-md-5">\
										<input class="form-control" id="customdescstring'+portCount+'" placeholder="Description String">\
									</div>\
								</div>';

				document.getElementById('divPort').appendChild(div);

				portCount ++;
			} else {
				switchPort = portNumber;

				for(var i=1; i<=portNumber; i++){
				var div = document.createElement('div');

			    div.innerHTML = '<div class="form-group">\
									<label class="control-label col-sm-2 col-md-2" id="port'+i+'">Port'+i+'</label>\
									<div class="col-sm-5 col-md-5">\
										<input class="form-control" id="dispstring'+i+'" placeholder="Display String">\
									</div>\
									<div class="col-sm-5 col-md-5">\
										<input class="form-control" id="descstring'+i+'" placeholder="Description String">\
									</div>\
								</div>';

				document.getElementById('divPort').appendChild(div);
				}
			}			
		}

		function addVLAN(){			
			var div = document.createElement('div');

		    div.innerHTML = '<hr>\
		    				<div class="form-group">\
								<label class="control-label col-sm-1 col-md-1">VLAN:</label>\
								<div class="col-sm-5 col-md-5">\
									<input class="form-control" id="vlan'+vlanCount+'" placeholder="VLAN">\
								</div>\
								<label class="control-label col-sm-1 col-md-1">Tag:</label>\
								<div class="col-sm-5 col-md-5">\
									<input class="form-control" id="tag'+vlanCount+'" placeholder="Tags">\
								</div>\
							</div>\
							<div class="form-group">\
								<label class="control-label col-sm-1 col-md-1">Tag:</label>\
								<div class="col-sm-5 col-md-5">\
									<input class="form-control" id="tagged'+vlanCount+'" placeholder="Port(s) Tagged">\
								</div>\
								<label class="control-label col-sm-1 col-md-1">Untag:</label>\
								<div class="col-sm-5 col-md-5">\
									<input class="form-control" id="untagged'+vlanCount+'" placeholder="Port(s) Untagged">\
								</div>\
							</div>\
							<div class="form-group">\
								<label class="control-label col-sm-1 col-md-1">IP:</label>\
								<div class="col-sm-5 col-md-5">\
									<input class="form-control" id="vlanip'+vlanCount+'" placeholder="IP Address">\
								</div>\
								<label class="control-label col-sm-1 col-md-1">Mask:</label>\
								<div class="col-sm-5 col-md-5">\
									<input class="form-control" id="vlanmask'+vlanCount+'" placeholder="Mask Address" value="255.255.255.0">\
								</div>\
							</div>';

			document.getElementById('divVLAN').appendChild(div);

			vlanCount++;
		}

		function generateScript(){		
			output = "";

			if (document.getElementById("sysName").value.length>1){
				var sysName = document.getElementById("sysName").value;
				output += "configure snmp sysName \""+sysName+"\"\n";

				var sysContact = document.getElementById("sysContact").value;
				output += "configure snmp sysContact \""+sysContact+"\"\n";

				var sysLocation = document.getElementById("sysLocation").value;
				output += "configure snmp sysLocation \""+sysLocation+"\"\n";
			}

			for (var i=1;i<=portCount;i++){
				if (document.getElementById("customport"+i) !== null){
					if (document.getElementById("customport"+i).length>0){
						var port = document.getElementById("customport"+i).value;
						var dispstring = document.getElementById("customdispstring"+i).value;
						output += "configure ports "+i+" display-string "+customdispstring+"\n";

						var descstring = document.getElementById("customdescstring"+i).value;
						output += "configure ports "+i+" description-string "+customdescstring+"\n";	
					}
				}
			}

			for (var i=1;i<=switchPort;i++){
				if (document.getElementById("port"+i) !== null){
					if (document.getElementById("port"+i).length>0){
						var port = document.getElementById("port"+i).value;
						var dispstring = document.getElementById("dispstring"+i).value;
						output += "configure ports "+i+" display-string "+dispstring+"\n";

						var descstring = document.getElementById("descstring"+i).value;
						output += "configure ports "+i+" description-string "+descstring+"\n";	
					}
				}
			}
			
			for (var i=0;i<=vlanCount;i++){
				if (document.getElementById("vlan"+i) !== null){
					if (document.getElementById("vlan"+i).value.length > 0){					
						var vlan = document.getElementById("vlan"+i).value;
						output += "create vlan \""+vlan+"\"\n";

						var tag = document.getElementById("tag"+i).value;
						output += "configure vlan "+vlan+" tag "+tag+"\n";

						var tagged = document.getElementById("tagged"+i).value;
						output += "configure vlan "+vlan+" add ports "+tagged+" tagged\n";

						var untagged = document.getElementById("untagged"+i).value;
						output += "configure vlan "+vlan+" add ports "+untagged+" untagged\n";

						var vlanip = document.getElementById("vlanip"+i).value;
						var vlanmask = document.getElementById("vlanmask"+i).value;
						output += "configure vlan "+vlan+" ipaddress "+vlanip+" "+vlanmask+"\n";
					}	
				}			
			}		
	
			document.getElementById("output").value = output;
		}	

		function downloadTXT(){
			var script = document.getElementById('output').value;			
			var filename = document.getElementById('filename').value;
			var link = document.createElement('a');
			mimeType = 'text/plain';

			if(filename.length>1)
				link.setAttribute('download', filename+".txt");
			else
				link.setAttribute('download', "output.txt");

			link.setAttribute('href', 'data:' + mimeType  +  ';charset=utf-8,' + encodeURIComponent(script));
			link.click();
		}

		function downloadXML(){
			var script = document.getElementById('output').value;
			var filename = document.getElementById('filename').value;
			var link = document.createElement('a');
			mimeType = 'text/plain';

			if(filename.length>1)
				link.setAttribute('download', filename+".xml");
			else
				link.setAttribute('download', "output.xml");

			link.setAttribute('href', 'data:' + mimeType  +  ';charset=utf-8,' + encodeURIComponent(script));
			link.click();
		}

		function toggler(divId) {
		    $("#"+divId).toggle();
		}

	</script>
</head>
<body style="padding-top:70px;">
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span> 
				</button>
				<a class="navbar-brand" href="#">TDec Network Group</a>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar" data-toggle="collapse" data-target=".nav-collapse.in">
				<ul class="nav navbar-nav">					
					<li><a href="#panelSNMP" data-toggle="collapse" data-target=".navbar-collapse">SNMP</a></li>
					<li><a href="#panelVLAN" data-toggle="collapse" data-target=".navbar-collapse">VLAN</a></li>
					<li><a href="#panelPort" data-toggle="collapse" data-target=".navbar-collapse">Ports</a></li> 
					<li><a href="#panelScript" data-toggle="collapse" data-target=".navbar-collapse">Criar Script</a></li>
					<li><a href="#panelExport" data-toggle="collapse" data-target=".navbar-collapse">Exportar Script</a></li> 
				</ul>
			</div>
		</div>
	</nav>

	<div class="container-fluid">	

			<div class="col-xs-12 col-sm-6 col-md-6">	

				<form class="form-horizontal" role="form">		
					<!--
					<div class="form-group">        
				     	<div class="col-sm-12">
							<input type="button" value="Configurar SNMP" onclick="javascript:toggler('panelSNMP');" class="btn btn-link btn-block">
						</div>
					</div>-->

					<div id="panelSNMP">
						<div class="panel panel-default">
	  					<div class="panel-heading">SNMP</div>					
					    <div class="panel-body">
							<div class="form-group">
								<label class="control-label col-sm-4 col-md-2" for="sysName">SysName:</label>
								<div class="col-sm-8 col-md-10">
									<input class="form-control" id="sysName" placeholder="SNMP SysName">
								</div>
						    </div>

						    <div class="form-group">
								<label class="control-label col-sm-4 col-md-2" for="sysContact">SysLocation:</label>
								<div class="col-sm-8 col-md-10">
									<input class="form-control" id="sysLocation" placeholder="SNMP SysLocation">
								</div>
						    </div>

						    <div class="form-group">
								<label class="control-label col-sm-4 col-md-2" for="sysContact">SysContact:</label>
								<div class="col-sm-8 col-md-10">
									<input class="form-control" id="sysContact" placeholder="SNMP SysContact">
								</div>
						    </div>
					   	</div>
						</div>
					</div>					

					

					<div class="panel panel-default" >
					
	  					<div class="panel-heading" >
	  						Port(s)
	  						<div class="btn-group pull-right" style="margin-top:13px">							    
							    	<a href="javascript:addPort('24');" class="btn btn-default col-xs-4 col-sm-4 col-md-4">24 ports</a>
							    	<a href="javascript:addPort('48');" class="btn btn-default col-xs-4 col-sm-4 col-md-4">48 ports</a>
							    	<a href="javascript:addPort('0');" class="btn btn-default col-xs-4 col-sm-4 col-md-$">? port</a>
						    </div>
	  					</div>					
					    <div class="panel-body" id="divPort" style="margin-top:15px">
							
					    </div>
					</div>									

					<div class="panel panel-default" id="panelVLAN" >
						<div class="panel-heading">
							VLAN
							<div class="btn-group pull-right" style="margin-top:13px">
								<input type="button" value="Configurar nova VLAN" onclick="javascript:addVLAN();" class="btn btn-default">
							</div>
						</div>
							<div class="panel-body" id="divVLAN" style="margin-top:15px"> 
								<div class="form-group">
								<label class="control-label col-sm-1 col-md-1">VLAN:</label>
								<div class="col-sm-5 col-md-5">
									<input class="form-control" id="vlan0" placeholder="VLAN">
								</div>
								<label class="control-label col-sm-1 col-md-1">Tag:</label>
								<div class="col-sm-5 col-md-5">
									<input class="form-control" id="tag0" placeholder="Tags">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-1 col-md-1">Tag:</label>
								<div class="col-sm-5 col-md-5">
									<input class="form-control" id="tagged0" placeholder="Port(s) Tagged">
								</div>
								<label class="control-label col-sm-1 col-md-1">Untag:</label>
								<div class="col-sm-5 col-md-5">
									<input class="form-control" id="untagged0" placeholder="Port(s) Untagged">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-sm-1 col-md-1">IP:</label>
								<div class="col-sm-5 col-md-5">
									<input class="form-control" id="vlanip0" placeholder="IP Address">
								</div>
								<label class="control-label col-sm-1 col-md-1">Mask:</label>
								<div class="col-sm-5 col-md-5">
									<input class="form-control" id="vlanmask0" placeholder="Mask Address" value="255.255.255.0">
								</div>
							</div>
							</div>							
					</div>													

				</form>

			</div>

			<div class="col-xs-12 col-sm-6 col-md-6">
				<form class="form-horizontal" role="form">

					<div class="form-group" id="panelScript">        
				     	<div class="col-sm-12">				     		
							<input type="button" value="Criar Script" onclick="javascript:generateScript();" class="btn btn-primary btn-block">	
						</div>
					</div>

					<textarea id='output' class="form-control" rows="15" style="width:100% ; overflow:auto; resize:none" placeholder="Seu script sera criado aqui" ></textarea>
					<br>

					<div class="panel panel-default" id="panelExport">
	  					<div class="panel-heading">Exportar Script</div>					
					    <div class="panel-body">
						    <div class="form-group">
							    <label class="control-label col-sm-1 col-md-1" for="sysName">Nome:</label>
							    <div class="col-sm-11 col-md-11">
							    	<input class="form-control" id="filename" placeholder="Nome do arquivo">
							    </div>
						    </div>

						    <div class="btn-group btn-block">							    
							    	<a href="javascript:downloadTXT();" class="btn btn-default col-xs-6 col-sm-6 col-md-6"><span class="glyphicon glyphicon-save" aria-hidden="true"></span> .TXT</a>
							    	<a href="javascript:downloadXML();" class="btn btn-default col-xs-6 col-sm-6 col-md-6"><span class="glyphicon glyphicon-save" aria-hidden="true"></span> .XML</a>
						    </div>
						</div>
					</div>
				</form>				
			</div>			

	</div>				
</body>
</html>